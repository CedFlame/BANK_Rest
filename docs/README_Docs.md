# üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Bank Cards API

## üìÑ –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
**Bank Cards API** ‚Äî —ç—Ç–æ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏.  
API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ Java 17 + Spring Boot 3 –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ OpenAPI 3.

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (JWT)
- üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (—Ä–æ–ª—å ADMIN)
- üí≥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏
- üí∏ –î–µ–Ω–µ–∂–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏)
- ‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Swagger UI
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞:
- Swagger UI: [http://localhost:8080/swagger-ui.html](http://localhost:8080/swagger-ui.html)
- OpenAPI JSON: [http://localhost:8080/v3/api-docs](http://localhost:8080/v3/api-docs)
- OpenAPI YAML: [http://localhost:8080/v3/api-docs.yaml](http://localhost:8080/v3/api-docs.yaml)

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Swagger
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Authorize**.
2. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ: Bearer <–≤–∞—à_JWT_—Ç–æ–∫–µ–Ω>

---

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth`)
- **POST** `/api/auth/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **POST** `/api/auth/login` ‚Äî –≤—Ö–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω.
- **GET** `/api/auth/me` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏).

---

## üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Ç–æ–ª—å–∫–æ ADMIN) (`/api/admin/users`)
- **GET** `/api/admin/users` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
- **GET** `/api/admin/users/{id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.
- **POST** `/api/admin/users` ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **PATCH** `/api/admin/users/{id}/roles` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **DELETE** `/api/admin/users/{id}` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **GET** `/api/admin/users/exists?username=email` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email.

---

## üí≥ –ö–∞—Ä—Ç—ã (`/api/cards`)
- **GET** `/api/cards/my` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **POST** `/api/cards/{userId}` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ADMIN).
- **PATCH** `/api/cards/{id}:block` ‚Äî –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É (ADMIN).
- **PATCH** `/api/cards/{id}:activate` ‚Äî –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É (ADMIN).
- **DELETE** `/api/cards/{id}` ‚Äî —É–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç—É (ADMIN).
- **GET** `/api/cards` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ä—Ç (ADMIN).

---

## üí∏ –ü–µ—Ä–µ–≤–æ–¥—ã (`/api/transfers`)
- **POST** `/api/transfers` ‚Äî –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Idempotency-Key` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–µ–π.
- **POST** `/api/transfers/{id}:cancel` ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥.
- **GET** `/api/transfers/my` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **GET** `/api/transfers` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (ADMIN).

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è
–í—Å–µ –º–µ—Ç–æ–¥—ã, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ —Å–ø–∏—Å–æ–∫ (`listMy`, `listAll`), –ø—Ä–∏–Ω–∏–º–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `page` ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (0..N)
- `size` ‚Äî —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = 10, –º–∞–∫—Å–∏–º—É–º = 100)

### –û—à–∏–±–∫–∏
–í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```json
{
"error": "Unauthorized"
}
```
## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –≤—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–¥–∞—á–∏ JWT —Ç–æ–∫–µ–Ω–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
- **–†–æ–ª–∏**:
- `ROLE_USER` ‚Äî –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏.
- `ROLE_ADMIN` ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –≤—Å–µ–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏).
- **Rate limiting**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–∫–ª—é—á–µ–Ω–æ –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:
- `/api/auth/login`
- `/api/auth/register`
